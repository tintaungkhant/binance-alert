import c from"puppeteer";import{createClient as w}from"redis";var r=w();async function s(a,t){await r.connect(),await r.set(a,t),await r.disconnect()}async function i(a){await r.connect();let t=await r.get(a);return await r.disconnect(),t}var n=class{browser;async create(){let t=2,o=0;do try{o++;let e=await i("wsEndpoint");if(e)return this.browser=await c.connect({browserWSEndpoint:e}),console.log("Browser connected"),this.browser;if(!e)return this.browser=await c.launch({userDataDir:"./user_data",headless:!0}),e=this.browser.wsEndpoint(),await s("wsEndpoint",e),console.log("Browser created"),this.browser}catch{o===t?console.log("Error at starting browser"):await s("wsEndpoint","")}while(o<t)}};export{n as default};
//# sourceMappingURL=browser.js.map
