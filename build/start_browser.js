import c from"puppeteer";import{createClient as w}from"redis";var r=w();async function n(o,t){await r.connect(),await r.set(o,t),await r.disconnect()}async function i(o){await r.connect();let t=await r.get(o);return await r.disconnect(),t}var a=class{browser;async create(){let t=2,s=0;do try{s++;let e=await i("wsEndpoint");if(e)return this.browser=await c.connect({browserWSEndpoint:e}),console.log("Browser connected"),this.browser;if(!e)return this.browser=await c.launch({userDataDir:"./user_data",headless:!0}),e=this.browser.wsEndpoint(),await n("wsEndpoint",e),console.log("Browser created"),this.browser}catch{s===t?console.log("Error at starting browser"):await n("wsEndpoint","")}while(s<t)}};(async function(){await new a().create()})();
//# sourceMappingURL=start_browser.js.map
